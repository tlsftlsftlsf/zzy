# ç§¯åˆ†ç³»ç»Ÿé‡æ–°éƒ¨ç½²æŒ‡å—

## ğŸ”„ å·²æœ‰éƒ¨ç½²æ›´æ–°ä¸ºä¸€ä½“åŒ–æœåŠ¡

å¦‚æœæ‚¨ä¹‹å‰å·²ç»éƒ¨ç½²è¿‡äº‘æœåŠ¡å™¨APIæœåŠ¡ï¼Œç°åœ¨éœ€è¦æ·»åŠ å‰ç«¯ç•Œé¢ï¼Œè¯·æŒ‰ä»¥ä¸‹æ­¥éª¤æ“ä½œï¼š

## ğŸ“‹ éƒ¨ç½²å‰å‡†å¤‡

### 1. å¤‡ä»½ç°æœ‰æ•°æ®ï¼ˆé‡è¦ï¼ï¼‰
```bash
# ç™»å½•æ‚¨çš„æœåŠ¡å™¨
ssh user@47.122.118.180

# åœæ­¢ç°æœ‰æœåŠ¡
points-sync stop

# å¤‡ä»½ç°æœ‰æ•°æ®
sudo cp /var/www/points-sync/points-data.json /var/www/points-sync/points-data-backup-$(date +%Y%m%d_%H%M%S).json

# å¤‡ä»½å¤‡ä»½æ–‡ä»¶
sudo tar -czf /tmp/points-backups-backup.tar.gz /var/www/points-sync/backups/
```

### 2. æ£€æŸ¥å½“å‰æœåŠ¡çŠ¶æ€
```bash
points-sync status
```

## ğŸš€ æ›´æ–°éƒ¨ç½²æ­¥éª¤

### æ­¥éª¤1: ä¸Šä¼ æ–°æ–‡ä»¶åˆ°æœåŠ¡å™¨

ä»æœ¬åœ°è®¡ç®—æœºæ‰§è¡Œï¼š
```bash
# ä¸Šä¼ æ›´æ–°åçš„æ–‡ä»¶
scp cloud_server.py deploy_cloud_server.sh index.html user@47.122.118.180:/tmp/
```

### æ­¥éª¤2: åœæ­¢å¹¶å¤‡ä»½ç°æœ‰æœåŠ¡

```bash
# ç™»å½•æœåŠ¡å™¨
ssh user@47.122.118.180

# åœæ­¢ç°æœ‰æœåŠ¡
points-sync stop

# å¤‡ä»½å½“å‰åº”ç”¨ç›®å½•
sudo cp -r /var/www/points-sync /var/www/points-sync-backup-$(date +%Y%m%d_%H%M%S)
```

### æ­¥éª¤3: é‡æ–°éƒ¨ç½²

```bash
# è¿›å…¥ä¸´æ—¶ç›®å½•
cd /tmp

# ç»™è„šæœ¬æ‰§è¡Œæƒé™
chmod +x deploy_cloud_server.sh

# é‡æ–°è¿è¡Œéƒ¨ç½²è„šæœ¬
sudo ./deploy_cloud_server.sh

# è¿™å°†è‡ªåŠ¨ï¼š
# - æ›´æ–° cloud_server.pyï¼ˆæ”¯æŒå‰ç«¯æœåŠ¡ï¼‰
# - æ·»åŠ  index.html å‰ç«¯æ–‡ä»¶
# - é‡å¯æœåŠ¡
```

### æ­¥éª¤4: æ¢å¤æ•°æ®ï¼ˆå¦‚æœéœ€è¦ï¼‰

```bash
# å¦‚æœéœ€è¦æ¢å¤ä¹‹å‰çš„æ•°æ®
sudo cp /var/www/points-sync-backup-*/points-data.json /var/www/points-sync/

# æ¢å¤å¤‡ä»½æ–‡ä»¶
sudo tar -xzf /tmp/points-backups-backup.tar.gz -C /
```

### æ­¥éª¤5: å¯åŠ¨å¹¶éªŒè¯æœåŠ¡

```bash
# å¯åŠ¨æœåŠ¡
points-sync start

# æ£€æŸ¥æœåŠ¡çŠ¶æ€
points-sync status

# æ£€æŸ¥æ—¥å¿—
points-sync logs
```

## ğŸŒ éªŒè¯å‰ç«¯è®¿é—®

### æµ‹è¯•å‰ç«¯é¡µé¢
```bash
# æœ¬åœ°æµ‹è¯•
curl http://localhost:5000

# åº”è¯¥è¿”å›HTMLå†…å®¹è€Œä¸æ˜¯JSONé”™è¯¯
```

### æµè§ˆå™¨è®¿é—®æµ‹è¯•
1. æ‰“å¼€æµè§ˆå™¨è®¿é—®ï¼š`http://47.122.118.180:5000`
2. åº”è¯¥çœ‹åˆ°å®Œæ•´çš„ç§¯åˆ†ç³»ç»Ÿç•Œé¢
3. æµ‹è¯•äº‘åŒæ­¥åŠŸèƒ½æ˜¯å¦æ­£å¸¸

### APIç«¯ç‚¹æµ‹è¯•
```bash
# æ£€æŸ¥APIä¿¡æ¯
curl http://47.122.118.180:5000/api/info

# æ£€æŸ¥å¥åº·çŠ¶æ€
curl http://47.122.118.180:5000/api/health
```

## ğŸ› ï¸ å¸¸è§é—®é¢˜è§£å†³

### é—®é¢˜1: å‰ç«¯é¡µé¢æ˜¾ç¤º404é”™è¯¯
**è§£å†³**ï¼š
```bash
# æ£€æŸ¥æ–‡ä»¶æ˜¯å¦å­˜åœ¨
ls -la /var/www/points-sync/index.html

# å¦‚æœä¸å­˜åœ¨ï¼Œé‡æ–°å¤åˆ¶
sudo cp /tmp/index.html /var/www/points-sync/

# é‡å¯æœåŠ¡
points-sync restart
```

### é—®é¢˜2: APIè°ƒç”¨å¤±è´¥
**è§£å†³**ï¼š
```bash
# æ£€æŸ¥cloud_server.pyæ˜¯å¦ä¸ºæœ€æ–°ç‰ˆæœ¬
grep "static_folder" /var/www/points-sync/cloud_server.py

# å¦‚æœæ²¡æœ‰é™æ€æ–‡ä»¶æ”¯æŒï¼Œé‡æ–°éƒ¨ç½²
sudo cp /tmp/cloud_server.py /var/www/points-sync/
points-sync restart
```

### é—®é¢˜3: æ•°æ®ä¸¢å¤±
**è§£å†³**ï¼š
```bash
# æ¢å¤å¤‡ä»½æ•°æ®
sudo cp /var/www/points-sync-backup-*/points-data.json /var/www/points-sync/
points-sync restart
```

### é—®é¢˜4: æƒé™é—®é¢˜
**è§£å†³**ï¼š
```bash
# ä¿®å¤æ–‡ä»¶æƒé™
sudo chown -R $USER:$USER /var/www/points-sync
sudo chmod -R 755 /var/www/points-sync
sudo chmod 644 /var/www/points-sync/index.html
```

## ğŸ“Š éƒ¨ç½²åéªŒè¯æ¸…å•

- [ ] æœåŠ¡çŠ¶æ€æ˜¾ç¤º"active (running)"
- [ ] å‰ç«¯é¡µé¢å¯ä»¥æ­£å¸¸è®¿é—®ï¼š`http://47.122.118.180:5000`
- [ ] ç§¯åˆ†ç³»ç»Ÿç•Œé¢å®Œæ•´æ˜¾ç¤º
- [ ] äº‘åŒæ­¥é¢æ¿å¯ä»¥æ‰“å¼€
- [ ] APIç«¯ç‚¹æ­£å¸¸å·¥ä½œï¼š`/api/info`ã€`/api/health`
- [ ] æ•°æ®åŒæ­¥åŠŸèƒ½æµ‹è¯•é€šè¿‡
- [ ] ç§»åŠ¨ç«¯è®¿é—®æ­£å¸¸

## ğŸ¯ ä¸€ä½“åŒ–æœåŠ¡ä¼˜åŠ¿

æ›´æ–°åçš„æœåŠ¡æä¾›ï¼š

1. **ç»Ÿä¸€è®¿é—®åœ°å€**: `http://47.122.118.180:5000`
2. **å®Œæ•´ç§¯åˆ†ç³»ç»Ÿ**: åŒ…å«å‰ç«¯ç•Œé¢å’Œæ‰€æœ‰åŠŸèƒ½
3. **äº‘ç«¯åŒæ­¥**: è‡ªåŠ¨è¿æ¥åˆ°åŒæœåŠ¡å™¨çš„API
4. **å¤šè®¾å¤‡æ”¯æŒ**: æ‰‹æœºã€å¹³æ¿ã€ç”µè„‘ç»Ÿä¸€è®¿é—®
5. **æ•°æ®å®‰å…¨**: æ‰€æœ‰æ•°æ®å­˜å‚¨åœ¨æ‚¨çš„æœåŠ¡å™¨

## ğŸ“ å¦‚éœ€å¸®åŠ©

å¦‚æœåœ¨é‡æ–°éƒ¨ç½²è¿‡ç¨‹ä¸­é‡åˆ°é—®é¢˜ï¼š

1. æ£€æŸ¥æœåŠ¡æ—¥å¿—ï¼š`points-sync logs`
2. éªŒè¯æ–‡ä»¶æƒé™ï¼š`ls -la /var/www/points-sync/`
3. æµ‹è¯•ç½‘ç»œè¿æ¥ï¼š`curl http://47.122.118.180:5000`
4. é‡å¯æœåŠ¡ï¼š`points-sync restart`

å®Œæˆé‡æ–°éƒ¨ç½²åï¼Œæ‚¨å°±å¯ä»¥äº«å—ä¸€ä½“åŒ–ç§¯åˆ†ç³»ç»ŸæœåŠ¡äº†ï¼ğŸ‰