# å‰ç«¯ç•Œé¢æ•…éšœæ’é™¤æŒ‡å—

## ğŸš¨ é—®é¢˜ï¼šæœåŠ¡å·²å¯åŠ¨ä½†å‰ç«¯ç•Œé¢æ‰“ä¸å¼€

æ ¹æ®æ‚¨çš„é”™è¯¯æƒ…å†µï¼ŒæŒ‰ä»¥ä¸‹æ­¥éª¤é€æ­¥æ’æŸ¥ï¼š

## ğŸ” æ­¥éª¤1: æ£€æŸ¥æœåŠ¡çŠ¶æ€

```bash
# æ£€æŸ¥æœåŠ¡çŠ¶æ€
points-sync status

# æŸ¥çœ‹å®æ—¶æ—¥å¿—
points-sync logs
```

## ğŸ” æ­¥éª¤2: æ£€æŸ¥æ–‡ä»¶æ˜¯å¦å­˜åœ¨

```bash
# æ£€æŸ¥åº”ç”¨ç›®å½•å†…å®¹
ls -la /var/www/points-sync/

# ç¡®è®¤index.htmlæ–‡ä»¶æ˜¯å¦å­˜åœ¨
ls -la /var/www/points-sync/index.html

# å¦‚æœä¸å­˜åœ¨ï¼Œæ‰‹åŠ¨å¤åˆ¶
sudo cp /tmp/index.html /var/www/points-sync/
sudo chown root:root /var/www/points-sync/index.html
sudo chmod 644 /var/www/points-sync/index.html
```

## ğŸ” æ­¥éª¤3: æ£€æŸ¥cloud_server.pyç‰ˆæœ¬

```bash
# æ£€æŸ¥cloud_server.pyæ˜¯å¦æ”¯æŒé™æ€æ–‡ä»¶
grep -n "static_folder\|send_from_directory" /var/www/points-sync/cloud_server.py

# åº”è¯¥çœ‹åˆ°ç±»ä¼¼è¾“å‡ºï¼š
# app = Flask(__name__, static_folder='static', static_url_path='')
# @app.route('/')
# def index():
#     return send_from_directory('.', 'index.html')
```

å¦‚æœæ²¡æœ‰çœ‹åˆ°è¿™äº›å†…å®¹ï¼Œè¯´æ˜cloud_server.pyæ²¡æœ‰æ­£ç¡®æ›´æ–°ã€‚

## ğŸ” æ­¥éª¤4: æ‰‹åŠ¨æ›´æ–°æ–‡ä»¶

### 4.1 æ›´æ–°cloud_server.py
```bash
# åœæ­¢æœåŠ¡
points-sync stop

# å¤åˆ¶æ–°çš„cloud_server.py
sudo cp /tmp/cloud_server.py /var/www/points-sync/

# ç¡®ä¿æœ‰æ‰§è¡Œæƒé™
sudo chmod +x /var/www/points-sync/cloud_server.py
```

### 4.2 ç¡®ä¿index.htmlå­˜åœ¨
```bash
# å¤åˆ¶index.html
sudo cp /tmp/index.html /var/www/points-sync/

# è®¾ç½®æ­£ç¡®æƒé™
sudo chown root:root /var/www/points-sync/index.html
sudo chmod 644 /var/www/points-sync/index.html
```

## ğŸ” æ­¥éª¤5: é‡å¯æœåŠ¡

```bash
# é‡æ–°å¯åŠ¨æœåŠ¡
points-sync start

# æ£€æŸ¥çŠ¶æ€
points-sync status

# æŸ¥çœ‹æ—¥å¿—ç¡®è®¤å¯åŠ¨ä¿¡æ¯
points-sync logs
```

## ğŸ” æ­¥éª¤6: æµ‹è¯•æœ¬åœ°è®¿é—®

```bash
# æœ¬åœ°æµ‹è¯•å‰ç«¯é¡µé¢
curl -I http://localhost:5000

# åº”è¯¥è¿”å›ï¼š
# HTTP/1.0 200 OK
# Content-Type: text/html

# æµ‹è¯•APIç«¯ç‚¹
curl http://localhost:5000/api/info
```

## ğŸ” æ­¥éª¤7: æ£€æŸ¥é˜²ç«å¢™è®¾ç½®

```bash
# Ubuntu/Debian
sudo ufw status
sudo ufw allow 5000

# CentOS/RHEL
sudo firewall-cmd --list-all
sudo firewall-cmd --add-port=5000/tcp --permanent
sudo firewall-cmd --reload
```

## ğŸ” æ­¥éª¤8: æ£€æŸ¥ç«¯å£ç›‘å¬

```bash
# æ£€æŸ¥5000ç«¯å£æ˜¯å¦åœ¨ç›‘å¬
netstat -tlnp | grep 5000

# æˆ–è€…ä½¿ç”¨sså‘½ä»¤
ss -tlnp | grep 5000

# åº”è¯¥çœ‹åˆ°ç±»ä¼¼è¾“å‡ºï¼š
# LISTEN 0 128 0.0.0.0:5000 0.0.0.0:* users:(("python",pid=1234,fd=3))
```

## ğŸ” æ­¥éª¤9: ä»å¤–éƒ¨æµ‹è¯•

```bash
# ä½¿ç”¨wgetæµ‹è¯•ï¼ˆå¦‚æœæœ‰çš„è¯ï¼‰
wget http://47.122.118.180:5000

# æˆ–è€…ä½¿ç”¨curl
curl -v http://47.122.118.180:5000
```

## ğŸ” æ­¥éª¤10: æ£€æŸ¥é”™è¯¯æ—¥å¿—

```bash
# æŸ¥çœ‹è¯¦ç»†é”™è¯¯æ—¥å¿—
sudo journalctl -u points-sync -f

# æŸ¥çœ‹è®¿é—®æ—¥å¿—
sudo tail -f /var/log/points-sync/access.log

# æŸ¥çœ‹é”™è¯¯æ—¥å¿—
sudo tail -f /var/log/points-sync/error.log
```

## ğŸ› ï¸ å®Œæ•´ä¿®å¤å‘½ä»¤

å¦‚æœä»¥ä¸Šæ­¥éª¤éƒ½ç¡®è®¤æ— è¯¯ï¼Œæ‰§è¡Œå®Œæ•´çš„ä¿®å¤æµç¨‹ï¼š

```bash
# 1. åœæ­¢æœåŠ¡
points-sync stop

# 2. å¤‡ä»½å½“å‰æ–‡ä»¶
sudo cp /var/www/points-sync/cloud_server.py /var/www/points-sync/cloud_server.py.backup

# 3. æ›´æ–°æ–‡ä»¶
sudo cp /tmp/cloud_server.py /var/www/points-sync/
sudo cp /tmp/index.html /var/www/points-sync/

# 4. è®¾ç½®æƒé™
sudo chown -R root:root /var/www/points-sync
sudo chmod -R 755 /var/www/points-sync
sudo chmod 644 /var/www/points-sync/index.html

# 5. å¯åŠ¨æœåŠ¡
points-sync start

# 6. æ£€æŸ¥çŠ¶æ€
points-sync status

# 7. æœ¬åœ°æµ‹è¯•
curl -I http://localhost:5000
```

## ğŸ”§ å¸¸è§é—®é¢˜è§£å†³

### é—®é¢˜1: 403 Forbiddené”™è¯¯
**è§£å†³**: æ£€æŸ¥æ–‡ä»¶æƒé™
```bash
sudo chmod 644 /var/www/points-sync/index.html
sudo chown root:root /var/www/points-sync/index.html
```

### é—®é¢˜2: 404 Not Foundé”™è¯¯
**è§£å†³**: ç¡®è®¤cloud_server.pyåŒ…å«å‰ç«¯è·¯ç”±
```bash
grep -A 5 "def index" /var/www/points-sync/cloud_server.py
```

### é—®é¢˜3: 500 Internal Server Error
**è§£å†³**: æ£€æŸ¥Pythonè¯­æ³•é”™è¯¯
```bash
python3 -m py_compile /var/www/points-sync/cloud_server.py
```

### é—®é¢˜4: ç«¯å£è¢«å ç”¨
**è§£å†³**: æ‰¾åˆ°å ç”¨è¿›ç¨‹å¹¶ç»ˆæ­¢
```bash
sudo lsof -i :5000
sudo kill -9 [PID]
```

## ğŸ“ è·å–å¸®åŠ©

å¦‚æœä»ç„¶æ— æ³•è§£å†³ï¼Œè¯·æä¾›ä»¥ä¸‹ä¿¡æ¯ï¼š

1. `points-sync status` çš„è¾“å‡º
2. `points-sync logs` çš„æœ€å20è¡Œ
3. `ls -la /var/www/points-sync/` çš„è¾“å‡º
4. `curl -v http://localhost:5000` çš„è¾“å‡º
5. æµè§ˆå™¨ä¸­çš„å…·ä½“é”™è¯¯ä¿¡æ¯

å®Œæˆè¿™äº›æ£€æŸ¥åï¼Œå‰ç«¯ç•Œé¢åº”è¯¥å¯ä»¥æ­£å¸¸è®¿é—®äº†ï¼